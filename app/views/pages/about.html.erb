<div class="cv-container">
  <div class="cv-description">
    <p><%= @resume.description[0] %></p>
    <p><%= @resume.description[1] %></p>
  </div>

  <div class="cv-download" >
    <%= cl_image_tag @resume.picture.key, alt: "Image du CV", id: "first-section" %>

    <!-- bouton de téléchargement avec popover -->
    <div data-controller="popover" data-action="mouseenter->popover#show mouseleave->popover#hide">
      <%= link_to download_resume_path(@resume), class: "button-download", target: "_blank", rel: "noopener noreferrer" do %> <!-- Lien de téléchargement -->
        <i class="fa-solid fa-download" style="color: #000000;"></i>
      <% end %>

      <!-- Contenu du popover pour le bouton de téléchargement -->
      <template data-popover-target="content">
        <div data-popover-target="card" class="popover-content">
          <p>Mon CV</p>
        </div>
      </template>
    </div>
  </div>

</div>

<div class="section-parcours">
  <h2><span>C</span>onfirmé par des diplômes</h2>

  <% if user_signed_in? && current_user.admin? %>
    <%= link_to "Ajouter une nouvelle éducation", new_resume_education_path(@resume.id), class: "btn btn-primary" %>
  <% end %>


  <div class="box-timeline">


    <div class="ligne"></div>

    <% icons = ["&#127891;", "&#127891;", "&#127891;", "&#127891;"] %> <!-- Définir les icônes ici -->

    <% @educations.each_with_index do |education, index| %>
      <!-- Les éléments "rond" pour chaque éducation avec une icône différente -->
      <div class="rond r<%= index + 1 %>" data-anim="<%= index + 1 %>">
        <%= icons[index % icons.size].html_safe %> <!-- Afficher une icône différente -->
      </div>

      <!-- Appliquer des classes dynamiques pour alterner l'alignement des boîtes -->
      <div class="box b<%= index + 1 %> <%= index.even? ? 'left' : 'right' %>" data-anim="<%= index + 1 %>">
        <p class="date"><%= education.start_date.strftime('%m/%Y') %> - <%= education.end_date.strftime('%m/%Y') %></p>
        <h2><%= education.diploma_name %></h2>
        <p><%= education.institution_name %></p>
        <p><%= education.location %></p>
      </div>
    <% end %>

  </div>

</div>

<section class="carousel-logos">
  <div class="carousel" id="carousel" role="region" aria-label="Logo Carousel">

    <div class="carousel-mask-left"></div>
    <div class="carousel-mask-right"></div>

    <div class="carousel-container" id="carouselContainer" role="list">
      <%= cl_image_tag("html5_kf7hmz.png", alt: "html") %>
      <%= cl_image_tag("css3_q9lv1h.png", alt: "css") %>
      <%= cl_image_tag("js_qh6ndw.png", alt: "javascript")  %>
      <%= cl_image_tag("figma_d7mc4z.png", alt: "figma") %>
      <%= cl_image_tag("ruby_u4fzgi.png", alt: "ruby") %>
      <%= cl_image_tag("rails_w8dl1x.png", alt: "rails") %>
      <%= cl_image_tag("php_ehpiwx.png", alt: "php") %>
      <%= cl_image_tag("heroku_vqw6qd.png", alt: "heroku") %>
      <%= cl_image_tag("postgresql_czwsff.png", alt: "postgresql") %>

      <%= cl_image_tag("html5_kf7hmz.png", alt: "html") %>
      <%= cl_image_tag("css3_q9lv1h.png", alt: "css") %>
      <%= cl_image_tag("js_qh6ndw.png", alt: "javascript") %>
      <%= cl_image_tag("figma_d7mc4z.png", alt: "figma") %>
      <%= cl_image_tag("ruby_u4fzgi.png", alt: "ruby") %>
      <%= cl_image_tag("rails_w8dl1x.png", alt: "rails") %>
      <%= cl_image_tag("php_ehpiwx.png", alt: "php") %>
      <%= cl_image_tag("heroku_vqw6qd.png", alt: "heroku") %>
      <%= cl_image_tag("postgresql_czwsff.png", alt: "postgresql") %>
    </div>

  </div>
</section>
